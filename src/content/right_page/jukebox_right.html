<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyworld Jukebox</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        .jukebox {
            width: 95%;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .song-list {
            list-style: none;
            padding: 0;
        }
        .song-list li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 5px;
            border-bottom: 1px solid #ddd;
        }
        .controls {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="jukebox">
        <h2>üéµ Cyworld Jukebox</h2>
        <ul class="song-list" id="songList"></ul>
        <div class="controls">
            <button onclick="playSelected()">‚ñ∂ Ïû¨ÏÉù</button>
            <button onclick="nextSong()">‚è≠ Îã§Ïùå</button>
        </div>
        <h3>üéº Í≥° Ï∂îÍ∞Ä</h3>
        <input type="text" id="songTitle" placeholder="Í≥°Î™Ö">
        <input type="text" id="artist" placeholder="ÏïÑÌã∞Ïä§Ìä∏">
        <input type="text" id="youtubeUrl" placeholder="YouTube ÎßÅÌÅ¨">
        <button onclick="addSong()">Ï∂îÍ∞Ä</button>
        <div id="player"></div>
    </div>
    <!-- <object type="text/html" width="100%" height="500" data="//www.youtube.com/embed/UxEdtQR7gUM"> -->
    <script>
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/embed";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
            height: '390',
            width: '90%',
            videoId: 'YqN1p0FXVQo',
            playerVars: {
                'autoplay' : 1,
                'playsinline': 1
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
            });
        }

        function addSong() {
            const title = document.getElementById('songTitle').value;
            const artist = document.getElementById('artist').value;
            const url = document.getElementById('youtubeUrl').value;
            const videoId = url.split('v=')[1]?.split('&')[0];
            if (!title || !artist || !videoId) return alert("Ïò¨Î∞îÎ•∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî!");
            
            const songList = document.getElementById('songList');
            const li = document.createElement('li');
            li.innerHTML = `<input type="checkbox" class="song-check" data-id="${videoId}"> ${title} - ${artist}`;
            songList.appendChild(li);
        }


        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
            // setTimeout(stopVideo, 6000);
            // done = true;
            }
        }
        function stopVideo() {
            player.stopVideo();
        }
    </script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
